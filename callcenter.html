
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Call Center – Dodaj zgłoszenie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial; background: #f8f6ec; margin: 0; padding: 0; }
    header { background: #1e3615; color: white; text-align: center; padding: 10px; }
    header img { height: 40px; margin: 5px; }
    main { padding: 20px; }
    input, textarea {
      display: block; width: 100%; margin-bottom: 12px; padding: 10px;
      border: 1px solid #ccc; border-radius: 8px; font-size: 14px;
    }
    button {
      background-color: #c77b2b; color: white; padding: 10px;
      border: none; border-radius: 8px; cursor: pointer; font-size: 16px;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Logo" />
    <h2>NASZ PRĄD S.A. – Call Center</h2>
  </header>
  <main>
    <h3>Dodaj zgłoszenie</h3>
    <input type="text" id="name" placeholder="Imię i nazwisko" required />
    <input type="text" id="phone" placeholder="Telefon" required />
    <input type="text" id="miasto" placeholder="Miasto" required />
    <input type="text" id="ulica" placeholder="Ulica i nr" required />
    <input type="text" id="kod" placeholder="Kod pocztowy" required />
    <button onclick="dodajZgloszenie()">Dodaj klienta</button>
    <div id="potwierdzenie" style="margin-top: 15px;"></div>
  </main>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBIwz2juFmcNOVorEywVj8U040GgT3euVQ",
      authDomain: "mesi-a81c4.firebaseapp.com",
      projectId: "mesi-a81c4",
      storageBucket: "mesi-a81c4.appspot.com",
      messagingSenderId: "291235707667",
      appId: "1:291235707667:web:66d7f1e079321c5306f8e6"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const callCenterId = localStorage.getItem("user") || "call002";

    async function dodajZgloszenie() {
      const name = document.getElementById("name").value;
      const phone = document.getElementById("phone").value;
      const miasto = document.getElementById("miasto").value;
      const ulica = document.getElementById("ulica").value;
      const kod = document.getElementById("kod").value;

      if (!name || !phone || !miasto || !ulica || !kod) {
        alert("Uzupełnij wszystkie pola.");
        return;
      }

      await db.collection("tasks").add({
        name, phone, miasto, ulica, kod,
        status: "Dostępne",
        dodanePrzez: callCenterId,
        timestamp: new Date()
      });

      document.getElementById("potwierdzenie").innerText = "✅ Zgłoszenie dodane!";
      document.getElementById("name").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("miasto").value = "";
      document.getElementById("ulica").value = "";
      document.getElementById("kod").value = "";
    }
  </script>
</body>
</html>
